{% extends "base.html" %}
{% load cms_tags %}

{% block base_content %}
    <div class='showcase-block'>
        <div class='showcase showcase-block-active' id='showcase1'>
            <img src="{{ STATIC_URL }}images/index.jpeg" title="" alt=""/>
        </div>
        <div class='showcase' id='showcase2' style="display:none">
            <img src="{{ STATIC_URL }}images/showcase2.jpg" title="" alt=""/>
        </div>
        <div class='showcase' id='showcase3' style="display:none">
            <img src="{{ STATIC_URL }}images/showcase3.jpg" title="" alt=""/>
        </div>
    </div>
    <div class='row-fluid'>
        <div class='span4 main-block'>
            <img class='main-block-image' src='{{ STATIC_URL }}images/eyes.jpg'/>
            <div class='main-block-tansparent'></div>
            <div class='main-block-title'>Работы&nbsp&#9658;</div>
        </div>
        <div class='span4 main-block'>
            <img class='main-block-image' src='{{ STATIC_URL }}images/dyplomy.jpg'/>
            <div class='main-block-tansparent'></div>
            <div class='main-block-title'>Дипломы&nbsp&#9658;</div>
        </div>
        <div class='span4 main-block'>
            <img class='main-block-image' src='{{ STATIC_URL }}images/dyplomy.jpg'/>
            <div class='main-block-tansparent'></div>
            <div class='main-block-title'>Акции&nbsp&#9658;</div>
        </div>
    </div>
<script type="text/javascript">
    function activateMenuItem(number) {
        switch(number){
            case 1:
                $(".showcase").not("#showcase1").css("display", "none");
                $("#showcase1").css("display", "block");
                break;
            case 2:
                $(".showcase").not("#showcase2").css("display", "none");
                $("#showcase2").css("display", "block");
                break;
            case 3: 
                $(".showcase").not("#showcase3").css("display", "none");
                $("#showcase3").css("display", "block");
                break;
        }
    };
    function showShowcase(number) {
        activateMenuItem(number);
        $(".showcase").not("#showcase" + number).fadeOut("slow");
        $("#showcase" + number).fadeIn("slow");
    }
    $(function(){
        var delaySwitching = false;
        
        $("#showcase1").mouseover(function() {
            delaySwitching = true;
            showShowcase(1);
        });
        
        $("#showcase2").mouseover(function() {
            delaySwitching = true;
            showShowcase(2);
        });
        
        $("#showcase3").mouseover(function() {
            delaySwitching = true;
            showShowcase(3);
        });
        
        function showcaseSwitcher(number, timeout) {
            showShowcase(number);
            setInterval(function() {
                if (!delaySwitching) {
                    showShowcase(number);
                }
            }, timeout);
        };
        $(window).load(function(){
            var qnt = $(".showcase").length;
            $(".showcase").each(function(index) {
                var delayInterval = 6000;
                var delay = delayInterval*(index);
                setTimeout(function() {
                    showcaseSwitcher(index + 1, qnt*delayInterval);
                }, delay);
            });
        });
    });
</script>
{% endblock %}